docker run -p 8082:8085 --net=mynet --ip=10.10.0.2 --name="node1" -e SOCKET_ADDRESS="10.10.0.2:8085" -e VIEW="10.10.0.2:8085,10.10.0.3:8085,10.10.0.4:8085,10.10.0.5:8085,10.10.0.6:8085,10.10.0.7:8085" -e SHARD_COUNT="2" assignment4-img

docker run -p 8083:8085 --net=mynet --ip=10.10.0.3 --name="node2" -e SOCKET_ADDRESS="10.10.0.3:8085" -e VIEW="10.10.0.2:8085,10.10.0.3:8085,10.10.0.4:8085,10.10.0.5:8085,10.10.0.6:8085,10.10.0.7:8085" -e SHARD_COUNT="2" assignment4-img

docker run -p 8084:8085 --net=mynet --ip=10.10.0.4 --name="node3" -e SOCKET_ADDRESS="10.10.0.4:8085" -e VIEW="10.10.0.2:8085,10.10.0.3:8085,10.10.0.4:8085,10.10.0.5:8085,10.10.0.6:8085,10.10.0.7:8085" -e SHARD_COUNT="2" assignment4-img

docker run -p 8086:8085 --net=mynet --ip=10.10.0.5 --name="node4" -e SOCKET_ADDRESS="10.10.0.5:8085" -e VIEW="10.10.0.2:8085,10.10.0.3:8085,10.10.0.4:8085,10.10.0.5:8085,10.10.0.6:8085,10.10.0.7:8085" -e SHARD_COUNT="2" assignment4-img

docker run -p 8087:8085 --net=mynet --ip=10.10.0.6 --name="node5" -e SOCKET_ADDRESS="10.10.0.6:8085" -e VIEW="10.10.0.2:8085,10.10.0.3:8085,10.10.0.4:8085,10.10.0.5:8085,10.10.0.6:8085,10.10.0.7:8085" -e SHARD_COUNT="2" assignment4-img

docker run -p 8088:8085 --net=mynet --ip=10.10.0.7 --name="node6" -e SOCKET_ADDRESS="10.10.0.7:8085" -e VIEW="10.10.0.2:8085,10.10.0.3:8085,10.10.0.4:8085,10.10.0.5:8085,10.10.0.6:8085,10.10.0.7:8085" -e SHARD_COUNT="2" assignment4-img


docker run -p 8089:8085 --net=mynet --ip=10.10.0.8 --name="node7" -e SOCKET_ADDRESS="10.10.0.8:8085" -e VIEW="10.10.0.2:8085,10.10.0.3:8085,10.10.0.4:8085,10.10.0.5:8085,10.10.0.6:8085,10.10.0.7:8085,10.10.0.8:8085" assignment4-img


curl --request GET --header "Content-Type: application/json" --write-out "\n%{http_code}\n" http://localhost:8082/key-value-store-shard/shard-ids

curl --request GET --header "Content-Type: application/json" --write-out "\n%{http_code}\n" http://<node-socket-address>/key-value-store-shard/shard-id-members/1
curl --request GET --header "Content-Type: application/json" --write-out "\n%{http_code}\n" http://<node-socket-address>/key-value-store-shard/shard-id-members/2

curl --request GET --header "Content-Type: application/json" --write-out "\n%{http_code}\n" http://localhost:8082/key-value-store-shard/shard-id-key-count/2

curl --request GET --header "Content-Type: application/json" --write-out "\n%{http_code}\n" http://localhost:8082/key-value-store-shard/node-shard-id

docker run -p 8089:8085 --net=mynet --ip=10.10.0.8 --name="node7" -e SOCKET_ADDRESS="10.10.0.8:8085" -e VIEW="10.10.0.2:8085,10.10.0.3:8085,10.10.0.4:8085,10.10.0.5:8085,10.10.0.6:8085,10.10.0.7:8085,10.10.0.8:8085" assignment4-img

curl --request PUT --header "Content-Type: application/json" --write-out "\n%{http_code}\n" --data '{"socket-address": "10.10.0.8:8085"}' http://localhost:8082/key-value-store-shard/add-member/2

curl --request PUT --header "Content-Type: application/json" --write-out "\n%{http_code}\n" --data '{"shard-count": 3 }' http://localhost:8082/key-value-store-shard/reshard

curl --request GET --header "Content-Type: application/json" --write-out "\n%{http_code}\n" 'http://localhost:8089/key-value-store-shard/node-shard-id'



curl --request PUT --header "Content-Type: application/json" --write-out "\n%{http_code}\n" --data '{"value": 1, "causal-metadata": ""}' http://localhost:8082/key-value-store/x


TEST:
curl --request PUT --header "Content-Type: application/json" --write-out "\n%{http_code}\n" --data '{"value": 0, "causal-metadata": ""}' http://localhost:8082/key-value-store/key0 && curl --request PUT --header "Content-Type: application/json" --write-out "\n%{http_code}\n" --data '{"value": 1, "causal-metadata": "{\"10.10.0.2:8085\": 1, \"10.10.0.3:8085\": 0, \"10.10.0.4:8085\": 0, \"10.10.0.5:8085\": 0, \"10.10.0.6:8085\": 0, \"10.10.0.7:8085\": 0}"}' http://localhost:8083/key-value-store/key1 && curl --request PUT --header "Content-Type: application/json" --write-out "\n%{http_code}\n" --data '{"value": 2, "causal-metadata": "{\"10.10.0.2:8085\": 1, \"10.10.0.3:8085\": 1, \"10.10.0.4:8085\": 0, \"10.10.0.5:8085\": 0, \"10.10.0.6:8085\": 0, \"10.10.0.7:8085\": 0}"}' http://localhost:8084/key-value-store/key2 && curl --request PUT --header "Content-Type: application/json" --write-out "\n%{http_code}\n" --data '{"value": 3, "causal-metadata": "{\"10.10.0.2:8085\": 1, \"10.10.0.3:8085\": 1, \"10.10.0.4:8085\": 1, \"10.10.0.5:8085\": 0, \"10.10.0.6:8085\": 0, \"10.10.0.7:8085\": 0}"}' http://localhost:8086/key-value-store/key3 && curl --request PUT --header "Content-Type: application/json" --write-out "\n%{http_code}\n" --data '{"value": 4, "causal-metadata": "{\"10.10.0.2:8085\": 1, \"10.10.0.3:8085\": 1, \"10.10.0.4:8085\": 1, \"10.10.0.5:8085\": 1, \"10.10.0.6:8085\": 0, \"10.10.0.7:8085\": 0}"}' http://localhost:8087/key-value-store/key4 && curl --request PUT --header "Content-Type: application/json" --write-out "\n%{http_code}\n" --data '{"value": 5, "causal-metadata": "{\"10.10.0.2:8085\": 1, \"10.10.0.3:8085\": 1, \"10.10.0.4:8085\": 1, \"10.10.0.5:8085\": 1, \"10.10.0.6:8085\": 1, \"10.10.0.7:8085\": 0}"}' http://localhost:8088/key-value-store/key5 && curl --request PUT --header "Content-Type: application/json" --write-out "\n%{http_code}\n" --data '{"value": 6, "causal-metadata": "{\"10.10.0.2:8085\": 1, \"10.10.0.3:8085\": 1, \"10.10.0.4:8085\": 1, \"10.10.0.5:8085\": 1, \"10.10.0.6:8085\": 1, \"10.10.0.7:8085\": 1}"}' http://localhost:8082/key-value-store/key6 && curl --request PUT --header "Content-Type: application/json" --write-out "\n%{http_code}\n" --data '{"value": 7, "causal-metadata": "{\"10.10.0.2:8085\": 2, \"10.10.0.3:8085\": 1, \"10.10.0.4:8085\": 1, \"10.10.0.5:8085\": 1, \"10.10.0.6:8085\": 1, \"10.10.0.7:8085\": 1}"}' http://localhost:8083/key-value-store/key7 && curl --request PUT --header "Content-Type: application/json" --write-out "\n%{http_code}\n" --data '{"value": 8, "causal-metadata": "{\"10.10.0.2:8085\": 2, \"10.10.0.3:8085\": 2, \"10.10.0.4:8085\": 1, \"10.10.0.5:8085\": 1, \"10.10.0.6:8085\": 1, \"10.10.0.7:8085\": 1}"}' http://localhost:8084/key-value-store/key8 && curl --request PUT --header "Content-Type: application/json" --write-out "\n%{http_code}\n" --data '{"value": 9, "causal-metadata": "{\"10.10.0.2:8085\": 2, \"10.10.0.3:8085\": 2, \"10.10.0.4:8085\": 2, \"10.10.0.5:8085\": 1, \"10.10.0.6:8085\": 1, \"10.10.0.7:8085\": 1}"}' http://localhost:8086/key-value-store/key9 && curl --request PUT --header "Content-Type: application/json" --write-out "\n%{http_code}\n" --data '{"value": 10, "causal-metadata": "{\"10.10.0.2:8085\": 2, \"10.10.0.3:8085\": 2, \"10.10.0.4:8085\": 2, \"10.10.0.5:8085\": 2, \"10.10.0.6:8085\": 1, \"10.10.0.7:8085\": 1}"}' http://localhost:8087/key-value-store/key10 && curl --request PUT --header "Content-Type: application/json" --write-out "\n%{http_code}\n" --data '{"value": 11, "causal-metadata": "{\"10.10.0.2:8085\": 2, \"10.10.0.3:8085\": 2, \"10.10.0.4:8085\": 2, \"10.10.0.5:8085\": 2, \"10.10.0.6:8085\": 2, \"10.10.0.7:8085\": 1}"}' http://localhost:8088/key-value-store/key11 && curl --request PUT --header "Content-Type: application/json" --write-out "\n%{http_code}\n" --data '{"value": 12, "causal-metadata": "{\"10.10.0.2:8085\": 2, \"10.10.0.3:8085\": 2, \"10.10.0.4:8085\": 2, \"10.10.0.5:8085\": 2, \"10.10.0.6:8085\": 2, \"10.10.0.7:8085\": 2}"}' http://localhost:8082/key-value-store/key12

curl --request DELETE --header "Content-Type: application/json" --write-out "\n%{http_code}\n" --data '{"causal-metadata": "{\"10.10.0.2:8085\": 2, \"10.10.0.3:8085\": 2, \"10.10.0.4:8085\": 2, \"10.10.0.5:8085\": 2, \"10.10.0.6:8085\": 2, \"10.10.0.7:8085\": 2}"}"}' http://localhost:8082/key-value-store/key0 

&& curl --request PUT --header "Content-Type: application/json" --write-out "\n%{http_code}\n" --data '{"value": 1, "causal-metadata": "{\"10.10.0.2:8085\": 1, \"10.10.0.3:8085\": 0, \"10.10.0.4:8085\": 0, \"10.10.0.5:8085\": 0, \"10.10.0.6:8085\": 0, \"10.10.0.7:8085\": 0}"}' http://localhost:8083/key-value-store/key1 && curl --request PUT --header "Content-Type: application/json" --write-out "\n%{http_code}\n" --data '{"value": 2, "causal-metadata": "{\"10.10.0.2:8085\": 1, \"10.10.0.3:8085\": 1, \"10.10.0.4:8085\": 0, \"10.10.0.5:8085\": 0, \"10.10.0.6:8085\": 0, \"10.10.0.7:8085\": 0}"}' http://localhost:8084/key-value-store/key2 && curl --request PUT --header "Content-Type: application/json" --write-out "\n%{http_code}\n" --data '{"value": 3, "causal-metadata": "{\"10.10.0.2:8085\": 1, \"10.10.0.3:8085\": 1, \"10.10.0.4:8085\": 1, \"10.10.0.5:8085\": 0, \"10.10.0.6:8085\": 0, \"10.10.0.7:8085\": 0}"}' http://localhost:8086/key-value-store/key3 && curl --request PUT --header "Content-Type: application/json" --write-out "\n%{http_code}\n" --data '{"value": 4, "causal-metadata": "{\"10.10.0.2:8085\": 1, \"10.10.0.3:8085\": 1, \"10.10.0.4:8085\": 1, \"10.10.0.5:8085\": 1, \"10.10.0.6:8085\": 0, \"10.10.0.7:8085\": 0}"}' http://localhost:8087/key-value-store/key4 && curl --request PUT --header "Content-Type: application/json" --write-out "\n%{http_code}\n" --data '{"value": 5, "causal-metadata": "{\"10.10.0.2:8085\": 1, \"10.10.0.3:8085\": 1, \"10.10.0.4:8085\": 1, \"10.10.0.5:8085\": 1, \"10.10.0.6:8085\": 1, \"10.10.0.7:8085\": 0}"}' http://localhost:8088/key-value-store/key5 && curl --request PUT --header "Content-Type: application/json" --write-out "\n%{http_code}\n" --data '{"value": 6, "causal-metadata": "{\"10.10.0.2:8085\": 1, \"10.10.0.3:8085\": 1, \"10.10.0.4:8085\": 1, \"10.10.0.5:8085\": 1, \"10.10.0.6:8085\": 1, \"10.10.0.7:8085\": 1}"}' http://localhost:8082/key-value-store/key6 && curl --request PUT --header "Content-Type: application/json" --write-out "\n%{http_code}\n" --data '{"value": 7, "causal-metadata": "{\"10.10.0.2:8085\": 2, \"10.10.0.3:8085\": 1, \"10.10.0.4:8085\": 1, \"10.10.0.5:8085\": 1, \"10.10.0.6:8085\": 1, \"10.10.0.7:8085\": 1}"}' http://localhost:8083/key-value-store/key7 && curl --request PUT --header "Content-Type: application/json" --write-out "\n%{http_code}\n" --data '{"value": 8, "causal-metadata": "{\"10.10.0.2:8085\": 2, \"10.10.0.3:8085\": 2, \"10.10.0.4:8085\": 1, \"10.10.0.5:8085\": 1, \"10.10.0.6:8085\": 1, \"10.10.0.7:8085\": 1}"}' http://localhost:8084/key-value-store/key8 && curl --request PUT --header "Content-Type: application/json" --write-out "\n%{http_code}\n" --data '{"value": 9, "causal-metadata": "{\"10.10.0.2:8085\": 2, \"10.10.0.3:8085\": 2, \"10.10.0.4:8085\": 2, \"10.10.0.5:8085\": 1, \"10.10.0.6:8085\": 1, \"10.10.0.7:8085\": 1}"}' http://localhost:8086/key-value-store/key9 && curl --request PUT --header "Content-Type: application/json" --write-out "\n%{http_code}\n" --data '{"value": 10, "causal-metadata": "{\"10.10.0.2:8085\": 2, \"10.10.0.3:8085\": 2, \"10.10.0.4:8085\": 2, \"10.10.0.5:8085\": 2, \"10.10.0.6:8085\": 1, \"10.10.0.7:8085\": 1}"}' http://localhost:8087/key-value-store/key10 && curl --request PUT --header "Content-Type: application/json" --write-out "\n%{http_code}\n" --data '{"value": 11, "causal-metadata": "{\"10.10.0.2:8085\": 2, \"10.10.0.3:8085\": 2, \"10.10.0.4:8085\": 2, \"10.10.0.5:8085\": 2, \"10.10.0.6:8085\": 2, \"10.10.0.7:8085\": 1}"}' http://localhost:8088/key-value-store/key11 && curl --request PUT --header "Content-Type: application/json" --write-out "\n%{http_code}\n" --data '{"value": 12, "causal-metadata": "{\"10.10.0.2:8085\": 2, \"10.10.0.3:8085\": 2, \"10.10.0.4:8085\": 2, \"10.10.0.5:8085\": 2, \"10.10.0.6:8085\": 2, \"10.10.0.7:8085\": 2}"}' http://localhost:8082/key-value-store/key12
